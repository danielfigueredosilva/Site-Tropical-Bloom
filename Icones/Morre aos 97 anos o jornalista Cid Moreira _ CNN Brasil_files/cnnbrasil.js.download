(function(){var scriptName="embed.js";var jQuery;var jqueryPath="https://ajax.googleapis.com/ajax/libs/jquery/1.12.1/jquery.min.js";var jqueryVersion="1.12.1";var scriptTag;var allScripts=document.getElementsByTagName('script');var targetScripts=[];for(var i in allScripts){var name=allScripts[i].src
if(name&&name.indexOf(scriptName)>0)
targetScripts.push(allScripts[i]);}
scriptTag=targetScripts[targetScripts.length-1];audiomeIsLoaging=false;function loadScript(src,onLoad){var script_tag=document.createElement('script');script_tag.setAttribute("type","text/javascript");script_tag.setAttribute("src",src);if(script_tag.readyState){script_tag.onreadystatechange=function(){if(this.readyState=='complete'||this.readyState=='loaded'){onLoad();}};}else{script_tag.onload=onLoad;}
(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(script_tag);}
function loadCss(href){var link_tag=document.createElement('link');link_tag.setAttribute("type","text/css");link_tag.setAttribute("rel","stylesheet");link_tag.setAttribute("href",href);(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(link_tag);}
if(window.jQuery===undefined||window.jQuery.fn.jquery!==jqueryVersion){loadScript(jqueryPath,initjQuery);}else{initjQuery();}
function initjQuery(){jQuery=window.jQuery.noConflict(true);main();}
function audiomeConsoleLog(strlog){if(audiomeLog==true){}}
function readMeAudioEnd(){jQuery("#readmeerror").append("<BR> ReadMeAudioEnd ")
audiomePlayCount=audiomePlayCount+1;if(audiomePlayCount<=audiomeMp3List.length-1){audiomeAudioSeek=0
audiomeSeekPercent=0
playAudioTTS(audiomeMp3List[audiomePlayCount])}else{rewindAudioTTS();audiomeConsoleLog('Finished! Playlist');}}
function playAudioTTS(mp3){if(getLogValueFromCurrentURL('log')==""){console.log("# playAudioTTS")}
FireAnalytics("PlayAudio");FireAnalyticsClienteReadme("PlayAudio");jQuery("#audiomebtn-loader").hide();if(audiomeSeekPercent>0){audioMeProgress=audiomeSeekPercent*audiomeTotalTime;audiomePlayCount=0;audiomeAudioSeek=audioMeProgress;var audiomeAcumulador=0
for(i=0;i<audiomeMp3List.length;i++){audiomeAcumulador=audiomeAcumulador+audiomeMp3List[i].TotalSeconds
if(audiomeAcumulador<audioMeProgress){audiomePlayCount=i+1;audiomeAudioSeek=audioMeProgress-audiomeAcumulador}}}
readmeTTSAudio.src=audiomeMp3List[audiomePlayCount].url+"#t="+audiomeAudioSeek
var playPromise=readmeTTSAudio.play();if(playPromise!==undefined){playPromise.then(_=>{readmeTTSAudio.playbackRate=readmeAudioSpeed
if(getLogValueFromCurrentURL('log')==""){console.log("# PLAY STARTED")}}).catch(error=>{if(getLogValueFromCurrentURL('log')==""){console.log("# PLAY ERROR")}
audiomeErrorCount=audiomeErrorCount+1;FireAnalytics("playPromise Error");if(audiomeErrorCount<6){FireAnalytics("playPromise Error retry - "+audiomeErrorCount);playAudioTTS(audiomeMp3List[audiomePlayCount]);}else{FireAnalytics("playPromise Error DIE - ");audiomeLoadAudio=false
audiomeIsLoaging=false
audiomeErrorCount=0;rewindAudioTTS();}});}
FireAnalyticsClienteReadme("PlayAudio");}
function playSponsoredAudioTTS(){readmeTTSAudioSponsored.src=audiomeSponsoredAudio.SponsorFileName
var playPromise=readmeTTSAudioSponsored.play();if(playPromise!==undefined){playPromise.then(_=>{}).catch(error=>{audiomeSponsorErrorCount=audiomeSponsorErrorCount+1;FireAnalytics("playPromise SPONSOR Error");if(audiomeSponsorErrorCount<3){FireAnalytics("playPromise SPONSOR Error retry - "+audiomeSponsorErrorCount);playSponsoredAudioTTS();}else{FireAnalytics("playPromise SPONSOR Error DIE - ");playAudioTTS(audiomeMp3List[audiomePlayCount]);}});}}
function playSponsoredSpotTTS(){readmeTTSSpotSponsored.src=audiomeSponsoredSpot.SponsorFileName
var playPromise=readmeTTSSpotSponsored.play();if(playPromise!==undefined){playPromise.then(_=>{}).catch(error=>{audiomeSpotErrorCount=audiomeSpotErrorCount+1;FireAnalytics("playPromise SPONSOR SPOT Error");if(audiomeSpotErrorCount<3){FireAnalytics("playPromise SPONSOR Error retry - "+audiomeSpotErrorCount);playSponsoredSpotTTS();}else{FireAnalytics("playPromise SPONSOR Error DIE - ");playAudioTTS(audiomeMp3List[audiomePlayCount]);}});}}
function pauseAudioTTS(){if(intervaloTimmerReadme){clearInterval(intervaloTimmerReadme)}
jQuery("#audiomeProgressBarAlpha").stop();readmeTTSAudio.pause();audiomeStatus="pause"
jQuery("#audiomebtn-loader").hide();jQuery("#audiomebtn-pause").hide();jQuery("#audiomebtn-play").show();audiomeAudioSeek=readmeTTSAudio.currentTime;jQuery("#audiomebtn-loader").hide();setTimeout(function(){audiomeIsLoaging=false;},500);}
function rewindAudioTTS(){FireAnalytics("EndAudio");jQuery("#audiomeProgressBarAlpha").stop();audiomePlayCount=0
audiomeAudioSeek=0
readmeTTSAudio.pause;audiomeStatus="pause";jQuery("#audiomebtn-loader").hide();jQuery("#audiomebtn-pause").hide();jQuery("#audiomebtn-play").show();}
function audioMeCalculatetotalTime(){if(getLogValueFromCurrentURL('log')==""){console.log("# CALCULATE TOTAL TIME")}
var audioCount=0
contaAudios=audiomeMp3List.length;contaLoaded=0;audiomeMp3List.forEach(function(element){var audiotimmer=new Audio();audiotimmer.src=element.url;audiotimmer.addEventListener('loadedmetadata',function(){var source=audiotimmer.src;if(getLogValueFromCurrentURL('log')==""){console.log("# SOURCE "+source)}
var TotalSeconds=parseInt(audiotimmer.duration);audiomeTotalTime=audiomeTotalTime+TotalSeconds
if(getLogValueFromCurrentURL('log')==""){console.log("# TotalSeconds "+TotalSeconds)}
audioCount=audioCount+1
audiomeMp3List.forEach(function(item){if(item.url==audiotimmer.src){item.TotalSeconds=audiotimmer.duration;}});if(audioCount>=audiomeMp3List.length){var minutes=parseInt(audiomeTotalTime/60,10);var seconds=parseInt(audiomeTotalTime%60);if(minutes<10){minutes="0"+minutes}
if(seconds<10){seconds="0"+seconds}
audiomeTotalTimeDisplay=minutes+":"+seconds;audiomeMp3List.forEach(function(x){});}
contaLoaded=contaLoaded+1;if(contaLoaded>=contaAudios&&contaAudios>0)
{if(audiomeSponsoredBannerFlag=="ON"){console.log("Show Sponsored Banner")
var img=new Image();img.src=audiomeSponsoredBanner.SponsorFileName;img.id="audiomeSponsoredImage"
var link=document.createElement("a");link.id="audiomeSponsoredLink";link.href=audiomeSponsoredBanner.bannerClick
link.target="_blank"
document.getElementById('audiome-container').appendChild(link);document.getElementById('audiomeSponsoredLink').appendChild(img);jQuery("#audiomeSponsoredLink").fadeIn();document.getElementById("audiomeSponsoredLink").addEventListener("click",audiomeSponsorClick);}
if(audiomeSponsoredAudioFlag=="ON"){playSponsoredAudioTTS();}else if(audiomeSponsoredSpotFlag=="ON"){playSponsoredSpotTTS()}else{playAudioTTS(audiomeMp3List[0]);}}},0);});}
function AddPauseToContent(content,classname,tagname){if(strip(tagname)!=""){var x=document.getElementsByTagName(tagname);}
if(strip(classname)!=""){var x=document.getElementsByClassName(classname);}
var i;for(i=0;i<x.length;i++){text=x[i].textContent.trim()
if(strip(text)!=""){var replace=strip(text);var re=new RegExp(replace,"g");content=content.replace(re,text+'. ');}}
return content}
function getHostName(fullurl){var url=fullurl;var hostname=(new URL(url)).hostname;return hostname;}
function getTextElementByClass(classname){var textbyclass=""
var x=document.getElementsByClassName(classname);var i;for(i=0;i<x.length;i++){textbyclass=x[i].textContent.trim()+" "}
return textbyclass;}
function HideElementByClass(documentClone,classname){var x=documentClone.getElementsByClassName(classname);var i;for(i=0;i<x.length;i++){x[i].style.display="none";}
return documentClone;}
function HideElementByTagName(documentClone,tagname){var x=documentClone.getElementsByTagName(tagname);var i;for(i=0;i<x.length;i++){x[i].style.display="none";}
return documentClone;}
function HideElementByID(documentClone,idname){var x=documentClone.getElementById(idname);if(x!=null){x.style.display="none";}
return documentClone;}
const format=num=>{const n=String(num),p=n.indexOf('.')
return n.replace(/\d(?=(?:\d{3})+(?:\.|$))/g,(m,i)=>p<0||i<p?`${m},`:m)}
function readmeLog(strlog){if(getLogValueFromCurrentURL('log')==""){console.log("#READMELOG # "+strlog)}}
function ReadabilityAjust(textIn){textOut=textIn
textOut=textOut.trim()
textOut=textOut.replace(/\n{2,}/g,' ');textOut=textOut.replace(/\s{2,}/g,' ');textOut=textOut.replace(/\.{2,}/g,'.');textOut=textOut.replace(/\&/g,' E ');var str=textOut
var regex=/(\.)([ABCDEFGHIJKLMNOPQRSTUVXYZ])/g;textOut=str.replace(regex,"$1 $2");textOut=textOut.replace(/\#/g,' ');textOut=textOut.replace(/\{/g,' ');textOut=textOut.replace(/\}/g,' ');textOut=textOut.replace(/\“/g,'');textOut=textOut.replace(/\”/g,'');textOut=textOut.replace(/\[/g,'');textOut=textOut.replace(/\]/g,'');return textOut;}
function strip(html)
{var tmp=document.createElement("DIV");tmp.innerHTML=html;return tmp.textContent||tmp.innerText;}
function clearString(mystring){return mystring.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;");}
function LoadReadability(){var documentClone=document.cloneNode(true);documentClone=HideElementByID(documentClone,"audiome-container");documentClone=HideElementByClass(documentClone,"twitter-tweet");documentClone=HideElementByClass(documentClone,"instagram-media");documentClone=HideElementByID(documentClone,"fb-root");documentClone=HideElementByClass(documentClone,"OUTBRAIN");documentClone=HideElementByID(documentClone,"taboola-below-article-thumbnails");documentClone=HideElementByTagName(documentClone,"header");documentClone=HideElementByTagName(documentClone,"figcaption");documentClone=HideElementByTagName(documentClone,"button");documentClone=HideElementByTagName(documentClone,"footer");documentClone=HideElementByTagName(documentClone,"figure");documentClone=HideElementByTagName(documentClone,"picture");documentClone=HideElementByTagName(documentClone,"aside");documentClone=HideElementByClass(documentClone,"tiktok-embed");documentClone=HideElementByClass(documentClone,"flourish-embed");documentClone=HideElementByID(documentClone,"onetrust-banner-sdk");documentClone=HideElementByClass(documentClone,"riddle2-wrapper");documentClone=HideElementByClass(documentClone,"post__video");documentClone=HideElementByClass(documentClone,"read__too");documentClone=HideElementByClass(documentClone,"bottom__share");documentClone=HideElementByClass(documentClone,"higher__share");documentClone=HideElementByClass(documentClone,"author__content");documentClone=HideElementByClass(documentClone,"post__sidebar col__sidebar");documentClone=HideElementByID(documentClone,"onetrust-banner-sdk");documentClone=HideElementByClass(documentClone,"translated_stamp");documentClone=HideElementByClass(documentClone,"translated");documentClone=HideElementByClass(documentClone,"tags__topics");documentClone=HideElementByClass(documentClone,"single-sharer");documentClone=HideElementByClass(documentClone,"single-header__author");documentClone=HideElementByClass(documentClone,"single-header__time");documentClone=HideElementByClass(documentClone,"single-editorial__follow");documentClone=HideElementByClass(documentClone,"single-tags");documentClone=HideElementByClass(documentClone,"post__sidebar col__sidebar");documentClone=HideElementByClass(documentClone,"related__content");documentClone=HideElementByClass(documentClone,"most__recent ");documentClone=HideElementByClass(documentClone,"single-sharer");documentClone=HideElementByClass(documentClone,"gallery gallery--content");documentClone=HideElementByClass(documentClone,"wp-video");documentClone=HideElementByClass(documentClone,"post__video");documentClone=HideElementByClass(documentClone,"wp-embedded-content");article=new Readability(documentClone).parse();articlecontent=article.content.replace(/<br>/g,". <br> ");articlecontent=articlecontent.replace(/<\/li>/g,". </li>");articlecontent=articlecontent.replace(/<\/h2>/g,". </h2>");articlecontent=articlecontent.replace(/<\/h3>/g,". </h3>");articlecontent=articlecontent.replace(/<\/p>/g,". </p>");audioMeContent=strip(articlecontent)
audioMeTitle=getTextElementByClass("post__title").trim()+". "
audioMeExcerpt=getTextElementByClass("post__excerpt").trim()+". "
if(audioMeTitle.length<=5){audioMeTitle=getTextElementByClass("single-header__title").trim()+". "}
if(audioMeExcerpt.length<=5){audioMeExcerpt=getTextElementByClass("single-header__excerpt").trim()+". "}
audiomeFullcontent=ReadabilityAjust(audioMeTitle+audioMeExcerpt+audioMeContent);if(getLogValueFromCurrentURL('log')==""){console.log('## readme v 2108 ##')
console.log('title  -> '+audioMeTitle)
console.log('excerpt  ->  '+audioMeExcerpt);console.log('audioMeContent  -> '+audioMeContent)
console.log("audiomeFullcontent  ->"+audiomeFullcontent)
console.log('audiomeFullcontent Size  -> '+audiomeFullcontent.length)
const dataAtual=new Date();readmeLog(`DH: ${dataAtual.toLocaleString()}`);}}
function audioMeCleartitle(audioMeTitle){audiomeConsoleLog("clearTitle "+audioMeTitle)
return audioMeTitle}
function audioMeFillProgressBar(){audiomeConsoleLog('audioMeFillProgressBar')
var i;var min=10;var max=25;for(i=1;i<200;i++){var random=Math.floor(Math.random()*(+max-+min))+ +min;jQuery('<div/>',{id:'audiomeProgressBarItem-'+i,"class":'audiomeProgressBarItem',style:'height:'+random+'px;'}).appendTo('#audiomeProgressBar');}}
function audioMeCalcETA(){var audiomePlayed=0
var audiomeETA=0
for(i=0;i<audiomePlayCount;i++){audiomePlayed=audiomePlayed+audiomeMp3List[i].TotalSeconds;}
audiomeETA=audiomeTotalTime-audiomePlayed-audiomeAudioSeek
displayTotalTime(audiomeETA)
return audiomeETA;}
function displayTotalTime(minutes){var div=document.getElementById('readmetimmer');div.textContent=convertSecondsToMinutes(minutes);iniciarContagemRegressiva(minutes)}
let intervaloTimmerReadme;function iniciarContagemRegressiva(tempoInicial){if(intervaloTimmerReadme){clearInterval(intervaloTimmerReadme)}
let tempoRestante=Math.floor(tempoInicial);intervaloTimmerReadme=setInterval(function(){const minutos=Math.floor(tempoRestante/60);const segundos=tempoRestante%60;const tempoFormatado=`${minutos.toString().padStart(2,'0')}:${segundos.toString().padStart(2,'0')}`;document.getElementById('readmetimmer').textContent=tempoFormatado;tempoRestante--;if(tempoRestante<0){clearInterval(intervaloTimmerReadme);document.getElementById('readmetimmer').textContent='00:00';}},1000/readmeAudioSpeed);}
function convertSecondsToMinutes(seconds){const wholeSeconds=Math.floor(seconds);const minutes=Math.floor(wholeSeconds/60);const remainingSeconds=wholeSeconds%60;const formattedMinutes=minutes.toString().padStart(2,'0');const formattedSeconds=remainingSeconds.toString().padStart(2,'0');return `${formattedMinutes}:${formattedSeconds}`;}
function audioMeProgressBarAnimate(){jQuery("#readmeerror").append("<BR> ProgressBar Animate ")
jQuery("#audiomeProgressBarAlpha").stop();var audiomeETA=audioMeCalcETA()
var totalwith=jQuery("#audiomeProgressBar").width()
var newWidth=totalwith*(audiomeETA/audiomeTotalTime)
jQuery("#audiomeProgressBarAlpha").width(newWidth);jQuery('#audiomeProgressBarAlpha').animate({width:0},parseInt(audiomeETA*1000/readmeAudioSpeed),"linear",function()
{audiomeConsoleLog("done animate");});}
function getLogValueFromCurrentURL(varName){const params=new URLSearchParams(window.location.search);return params.get(varName);}
function audioMeLoadTTS(){if(getLogValueFromCurrentURL('log')==""){console.log("# LOAD AWS")}
FireAnalytics("LoadAudio");var url='https://u6bdxq3r4k.execute-api.us-east-1.amazonaws.com/default/PollyFunction';var contaAudios=-1;var contaLoaded=-1;formData=JSON.stringify({'voice':audiomeVoiceName,'text':audiomeFullcontent,'clientid':audiomeClientId,'url':window.location.pathname,'bgprocess':'Y','domain':getHostName(document.location),'brief':'N','audiopromo':readmeAudioPromo})
jQuery.post(url,formData).done(function(data){if(getLogValueFromCurrentURL('log')==""){console.log("# status "+data.status);console.log("# deltaTime "+data.deltaTime);console.log("# textSize "+data.textSize);console.log("# actionDB "+data.actionDB);console.log("# statusDB "+data.statusDB);console.log("# origin_domain "+data.headers.origin_domain);}
audiomeLoadAudio=true
if(data.status=="NOK"){FireAnalytics("ERRO - "+window.location.pathname);if(getLogValueFromCurrentURL('log')==""){console.log("# STATUS NOK")}}
if(data.status=="WAIT"){if(getLogValueFromCurrentURL('log')==""){console.log("# STATUS WAIT")}
FireAnalytics("WAIT - "+window.location.pathname);console.log("WAIT - will try again")
readmeAudioPromo="N"
var myTimeoutWait=setTimeout(audioMeLoadTTS,6000);}
if(data.status=="OK"){data.urls.forEach(function(current,i){var dictaudio={};dictaudio.url=data.urls[i]
audiomeMp3List.push(dictaudio)
if(getLogValueFromCurrentURL('log')==""){console.log("# PUSH "+dictaudio.url)}});audiomeConsoleLog('audiomeMp3List length '+audiomeMp3List.length)
FireAnalytics("dbAudio-"+data.actionDB)
audioMeCalculatetotalTime();}}).fail(function(){console.log("timeout - will try again")
readmeAudioPromo="N"
var myTimeoutFail=setTimeout(audioMeLoadTTS,5000);})}
function audioMePlayClick(){if(getLogValueFromCurrentURL('log')==""){console.log("# PLAYClick")}
if(audiomeLoadAudio==false){readmeTTSAudio.play();readmeTTSAudioSponsored.play();readmeTTSSpotSponsored.play();}
if(audiomeIsLoaging==false){audiomeConsoleLog('button pressed');audiomeIsLoaging=true
jQuery("#audiomebtn-pause").hide();jQuery("#audiomebtn-play").hide();jQuery("#audiomebtn-loader").hide();jQuery("#audiomebtn-loader").show();if(audiomeLoadAudio==false){audioMeLoadTTS();}else{if(audiomeStatus=="stop"||audiomeStatus=="pause"){audiomeSeekPercent=0
playAudioTTS(audiomeMp3List[audiomePlayCount])}else{audiomeStatus=="pause"
pauseAudioTTS();}}}
else{}}
function audioMeTouchBarClick(event){console.log("--> audioMeTouchBarClick INIT <--");if(audiomeIsLoaging==false){audiomeConsoleLog('click');audiomeIsLoaging=true;if(audiomeStatus=="play"){pauseAudioTTS()}
jQuery("#audiomeProgressBarAlpha").stop();var offset=jQuery("#audiomeProgressBar").offset();var relativeX=(event.pageX-offset.left);audiomeConsoleLog('relativeX - '+relativeX);var totalwith=jQuery("#audiomeProgressBar").width();var perceltualbar=1-(relativeX/totalwith)
audiomeConsoleLog('perceltual - '+perceltualbar);var newWidth=perceltualbar*totalwith
audiomeConsoleLog('newWidth - '+newWidth);jQuery("#audiomeProgressBarAlpha").width(newWidth);audiomePercentual=relativeX/totalwith
audiomeConsoleLog('audiomePercentual - '+audiomePercentual);audiomeSeekPercent=audiomePercentual
jQuery("#audiomebtn-pause").hide();jQuery("#audiomebtn-play").hide();jQuery("#audiomebtn-loader").show();if(audiomeLoadAudio==false){audioMeLoadTTS();}else{playAudioTTS(audiomeMp3List[audiomePlayCount]);}}}
function FireAnalytics(eventAction){try{loadScript("https://www.googletagmanager.com/gtag/js?id=G-VV4TQTEC54",function(){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-VV4TQTEC54');gtag('event',eventAction,{'event_category':audiomeClientId});});}
catch(err){}}
function FireAnalyticsClienteReadme(eventAction){}
function audiomeSponsorClick(){FireAnalyticsClienteReadme("BannerClick");FireAnalytics("BannerClick");}
function getP(name){if(name=(new RegExp('[?&]'+encodeURIComponent(name)+'=([^&]*)')).exec(location.search))
return decodeURIComponent(name[1]);}
function audiomelinkClick(){window.open('https://www.readme.ai/pt')}
function readmeisPlaying(){return readmeTTSAudio.currentTime>0&&!readmeTTSAudio.paused&&!readmeTTSAudio.ended&&readmeTTSAudio.readyState>2;}
function readpespeedClick(){console.log("readpespeedClick click")
var speed=document.getElementById("readpespeed").textContent
console.log("speed "+speed)
if(speed=='1.0x'){document.getElementById("readpespeed").textContent="1.5x"
readmeAudioSpeed=1.5
readmeTTSAudio.playbackRate=readmeAudioSpeed}
if(speed=='1.5x'){document.getElementById("readpespeed").textContent="2.0x"
readmeAudioSpeed=2.0
readmeTTSAudio.playbackRate=readmeAudioSpeed}
if(speed=='2.0x'){document.getElementById("readpespeed").textContent="0.8x"
readmeAudioSpeed=0.8
readmeTTSAudio.playbackRate=readmeAudioSpeed}
if(speed=='0.8x'){document.getElementById("readpespeed").textContent="1.0x"
readmeAudioSpeed=1.0
readmeTTSAudio.playbackRate=readmeAudioSpeed}
var readmePlaying=readmeisPlaying()
if(readmePlaying==true){console.log("readmePlaying TRUE")
pauseAudioTTS()
playAudioTTS(audiomeMp3List[audiomePlayCount]);}else{console.log("readmePlaying FALSE")}}
function audioMeOpenLead(){if((audiomeLeadConfig=="1"||audiomeLeadConfig=="2")&&(localStorage.getItem(audiomeClientId)=="false")){jQuery('#audiome-player').animate({height:120},1000,"swing",function()
{audiomeConsoleLog("done animate");FireAnalytics("OpenLead")});}}
function audioMeCloseLead(){jQuery('#audiome-lead ').fadeOut()
jQuery('#audiome-player').animate({height:50},1000,"swing",function()
{audiomeConsoleLog("done animate");FireAnalytics("CloseLead")});}
function audioMeCriticEmail(msg){jQuery('#audiome-lead-label').css("display","none");jQuery('#audiome-lead-label').css("color","red");jQuery('#audiome-lead-label').text(msg)
jQuery('#audiome-lead-label').fadeIn();}
function audioMevalidateEmail(email){var re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(String(email).toLowerCase());}
function audiomeLeadSubmit(){var audiomeNome=jQuery('#audiome-nome-input').val()
var audiomeEmail=jQuery('#audiome-email-input').val()
var urlLead=audioMeRemoteUrl+"/lead/saveLead"
var IsValideEmail=audioMevalidateEmail(audiomeEmail)
submitLead=true
if(IsValideEmail==false){audioMeCriticEmail("Ops. Por favor, informe um e-mail válido")
submitLead=false;}
if(submitLead==true){jQuery.ajax({url:urlLead,type:"post",data:{'audiomeNome':audiomeNome,'audiomeEmail':audiomeEmail,'readmeSlug':audiomeClientId,'readmeDomain':getHostName(document.location)}}).done(function(msg){if(msg.status=="ok"){audioMeCloseLead()
localStorage.setItem(audiomeClientId,"true");}else{audioMeCriticEmail(msg.message)}});}}
function realBackgroundColor(elem){var transparent='rgba(0, 0, 0, 0)';var transparentIE11='transparent';if(!elem)return transparent;var bg=getComputedStyle(elem).backgroundColor;if(bg===transparent||bg===transparentIE11){return realBackgroundColor(elem.parentElement);}else{return bg;}}
function verificaStaging(){const dominioAtual=window.location.hostname;const dominiosStaging=['staging.cnnbrasil.com.br','localhost'];return dominiosStaging.includes(dominioAtual);}
function main(){var SM_Widget="cnnbrasil";const dataAtual=new Date();readmeLog(`DH: ${dataAtual.toLocaleString()}`);var SM_RemoteUrl='https://readme.ai'
var audiomeHostName=getHostName(document.location)
readmeAudioSpeed=1.0
if(audiomeHostName=="localhost"){SM_RemoteUrl="http://localhost:8080"}
if(audiomeHostName.search("ngrok")>0){SM_RemoteUrl="https://"+audiomeHostName;}
homeUrl=SM_RemoteUrl
audiomeClientId=SM_Widget;audioMeRemoteUrl=SM_RemoteUrl;audiomeStatus="stop"
audiomeLoadAudio=false
audiomeSound=null
audiomeMp3List=[]
audiomePlayCount=0
audiomeTotalTime=0
audiomeAudioDuration=0
audiomeAudioSeek=0
audiomeSeekPercent=0
audiomeVoiceName=""
audiomeLog=true
audiomeIsLoaging=false;audiomeErrorCount=0;audiomeLeadConfig="0";audioMeLeadShow=localStorage.getItem(audiomeClientId);readmeAudioPromo="N"
audiomeSponsoredBanner={}
audiomeSponsoredBannerFlag="OFF"
audiomeSponsoredAudio={}
audiomeSponsoredAudioFlag="OFF"
audiomeSponsoredSpot={}
audiomeSponsoredSpotFlag="OFF"
audiomeSponsorErrorCount=0;audiomeSpotErrorCount=0;if(audioMeLeadShow===null){localStorage.setItem(audiomeClientId,"false");}
localStorage.setItem(audiomeClientId,"false");if(verificaStaging()){loadCss(SM_RemoteUrl+"/static/widget/staging-"+SM_Widget+".css");}else{loadCss(SM_RemoteUrl+"/static/widget/"+SM_Widget+".css");}
var jsonp_url=SM_RemoteUrl+"/widget/?site="+SM_Widget;loadScript(SM_RemoteUrl+"/static/js/readability.js",function(){LoadReadability();});const myParam=getLogValueFromCurrentURL('update')
if(myParam==""){console.log("PARAMUPDATE -> YES")
readmeAudioPromo="Y"}else{readmeAudioPromo="N"}
readmeTTSAudio=new Audio();readmeTTSAudioSponsored=new Audio();readmeTTSSpotSponsored=new Audio();readmeTTSAudio.addEventListener('ended',function(){readMeAudioEnd();});readmeTTSAudio.addEventListener('playing',function(){window.onbeforeunload=function(e){return "Sair do Site?";};audiomeStatus="play"
jQuery("#audiomebtn-play").hide();jQuery("#audiomebtn-pause").show();audioMeProgressBarAnimate()
jQuery("#audiomebtn-loader").hide();setTimeout(function(){audiomeIsLoaging=false;},1000);audioMeOpenLead();});readmeTTSAudioSponsored.addEventListener('ended',function(){console.log("Sponsored audio end");setTimeout(function(){var divReadMe=document.createElement("div");divReadMe.id="audiomelink";divReadMe.class="audiomeref";divReadMe.innerHTML="readme.ai";jQuery("#audiome-ref").html("www.readme.ai");if(audiomeSponsoredSpotFlag=="ON"){playSponsoredSpotTTS();}else{playAudioTTS(audiomeMp3List[audiomePlayCount]);}},500);});readmeTTSAudioSponsored.addEventListener('playing',function(){FireAnalyticsClienteReadme("PlayAudioPatrocinado");FireAnalytics("PlayAudioPatrocinado");jQuery("#audiome-ref").html("seu áudio iniciará após a publicidade");});readmeTTSSpotSponsored.addEventListener('ended',function(){setTimeout(function(){jQuery("#audiome-ref").html("www.readme.ai");playAudioTTS(audiomeMp3List[audiomePlayCount]);},500);});readmeTTSSpotSponsored.addEventListener('playing',function(){FireAnalyticsClienteReadme("PlaySpotPatrocinado");FireAnalytics("PlaySpotPatrocinado");jQuery("#audiome-ref").html("seu áudio iniciará após a publicidade");});var readmebuild=getP('readmebuild')
if(readmebuild===undefined){readmebuild="OFF";}
if(readmebuild=="ON"){setTimeout(function(){audioMeLoadTTS();},3000);}
jQuery.getJSON(jsonp_url,function(result){if(result.site.Main=="ON"){var localurl=window.location.pathname
var newDiv=jQuery('<div>',{id:'audiome-container'});jQuery('.audiome__element').html(newDiv);jQuery('#audiome-container').html(result.html);audiomeVoiceName=result.site.Voice;audiomeConsoleLog("audiomeVoiceName -> "+audiomeVoiceName)
audioMeFillProgressBar();audiomeClearTitle=result.site.ClearTitle
document.getElementById("audiome-button").addEventListener("click",audioMePlayClick);document.getElementById("audiomeouca").addEventListener("click",audioMePlayClick);document.getElementById("audiomeTouchBar").addEventListener("click",audioMeTouchBarClick);document.getElementById("audiome-lead-button").addEventListener("click",audiomeLeadSubmit);document.getElementById("readpespeed").addEventListener("click",readpespeedClick);if(getLogValueFromCurrentURL('log')==""){console.log("# LISTENERS OK")}
FireAnalytics("LoadPlayer");var ListSponsorBanner=[]
var ListSponsorAudio=[]
var ListSponsorSpot=[]
result.Sponsor.forEach(function(current,i){console.log("sponsor forEach ")
var tipo=result.Sponsor[i].Tipo;var sponsorRule=result.Sponsor[i].SponsorAudioRule;var localURL=window.location.pathname;if(localurl.indexOf(sponsorRule)!=-1||sponsorRule=="*"){if(tipo=="banner"){audiomeSponsoredBanner.tipo=result.Sponsor[i].Tipo
audiomeSponsoredBanner.banerKey=result.Sponsor[i].banerKey
audiomeSponsoredBanner.SponsorFileName=result.Sponsor[i].SponsorFileName
audiomeSponsoredBanner.SponsorAudioRule=result.Sponsor[i].SponsorAudioRule
audiomeSponsoredBanner.bannerClick=result.Sponsor[i].bannerClick
audiomeSponsoredBannerFlag="ON"}
if(tipo=="audio"){audiomeSponsoredAudio.tipo=result.Sponsor[i].Tipo
audiomeSponsoredAudio.SponsorFileName=result.Sponsor[i].SponsorFileName
audiomeSponsoredAudio.SponsorAudioRule=result.Sponsor[i].SponsorAudioRule
audiomeSponsoredAudioFlag="ON"}
if(tipo=="spot"){SpotItem={}
SpotItem.tipo=result.Sponsor[i].Tipo
SpotItem.SponsorFileName=result.Sponsor[i].SponsorFileName
SpotItem.SponsorAudioRule=result.Sponsor[i].SponsorAudioRule
SpotItem.banerKey=result.Sponsor[i].banerKey
ListSponsorSpot.push(SpotItem)
console.log("sponsor spot add + "+i)}}});if(ListSponsorSpot.length>0){console.log("ListSponsorSpot -> "+ListSponsorSpot.length)
const randomSpot=Math.floor(Math.random()*ListSponsorSpot.length);console.log("randomSpot -> "+randomSpot)
audiomeSponsoredSpot.tipo=result.Sponsor[randomSpot].Tipo
audiomeSponsoredSpot.SponsorFileName=result.Sponsor[randomSpot].SponsorFileName
audiomeSponsoredSpot.SponsorAudioRule=result.Sponsor[randomSpot].SponsorAudioRule
audiomeSponsoredSpot.banerKey=result.Sponsor[randomSpot].banerKey
audiomeSponsoredSpotFlag="ON"}
if(localurl.indexOf('/revista/')!=-1){audiomeSponsoredSpotFlag="OFF"
console.log("audiomeSponsoredSpotFlag OFF")}
audiomeLeadConfig=result.site.LeadConfig;if(audiomeLeadConfig===null){audiomeLeadConfig="0"}}
if(getLogValueFromCurrentURL('log')==""){console.log("# LOADPLAYER END")}});jQuery(document).ready(function($){});}})();